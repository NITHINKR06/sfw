import { Category } from "./types";

export const deploymentCategory: Category = {
  id: "deployment",
  title: "Deployment & Hosting",
  description: "Deploy your applications - Frontend on Vercel, Backend on Render",
  prerequisites: ["Full-stack project completed", "Git basics"],
  icon: "ðŸš€",
  order: 10,
  topics: [
    {
      id: "vercel-frontend",
      title: "Deploy Frontend to Vercel",
      description: "Complete guide to deploy React/Next.js frontend on Vercel",
      prerequisites: ["React project", "GitHub account"],
      order: 1,
      examples: [
        {
          id: "vercel-setup",
          title: "Step 1: Prepare Project for Vercel",
          description: "Set up your React project for Vercel deployment",
          learningObjectives: [
            "Build production-ready app",
            "Configure environment variables",
            "Prepare for deployment",
          ],
          prerequisites: ["React project"],
          files: [
            {
              name: "vercel.json",
              filePath: "lib/DEPLOYMENT GUIDES/VERCEL/1. Setup/vercel.json",
              description: "Vercel configuration file",
              order: 1,
            },
            {
              name: ".env.example",
              filePath: "lib/DEPLOYMENT GUIDES/VERCEL/1. Setup/.env.example",
              description: "Environment variables template",
              order: 2,
            },
          ],
          steps: [
            "Ensure project builds successfully",
            "Test: npm run build",
            "Create vercel.json if needed",
            "Prepare environment variables",
          ],
          executionSteps: [
            "Build project: npm run build",
            "Test build: npm run preview",
            "Note down all environment variables needed",
            "Ensure .env.local is in .gitignore",
          ],
          expectedOutput: "Project builds successfully without errors",
          order: 1,
        },
        {
          id: "vercel-deploy",
          title: "Step 2: Deploy to Vercel",
          description: "Deploy your frontend application to Vercel",
          learningObjectives: [
            "Create Vercel account",
            "Deploy via GitHub",
            "Configure environment variables",
            "Get production URL",
          ],
          prerequisites: ["Completed Step 1", "GitHub repository"],
          files: [
            {
              name: "README.md",
              filePath: "lib/DEPLOYMENT GUIDES/VERCEL/2. Deploy/DEPLOYMENT_STEPS.txt",
              description: "Detailed deployment instructions",
              order: 1,
            },
          ],
          steps: [
            "Push code to GitHub",
            "Sign up/login to Vercel",
            "Import GitHub repository",
            "Configure build settings",
            "Add environment variables",
            "Deploy",
          ],
          executionSteps: [
            "Create GitHub repository",
            "Push code: git push origin main",
            "Go to vercel.com and sign up",
            "Click 'New Project'",
            "Import your GitHub repository",
            "Configure build command: npm run build",
            "Add environment variables in settings",
            "Click Deploy",
          ],
          expectedOutput: "Frontend deployed and accessible at vercel.app URL",
          order: 2,
        },
        {
          id: "vercel-env-vars",
          title: "Step 3: Configure Environment Variables on Vercel",
          description: "Set up environment variables for production",
          learningObjectives: [
            "Add environment variables",
            "Update API URLs for production",
            "Understand Vercel environment settings",
          ],
          prerequisites: ["Completed Step 2"],
          files: [
            {
              name: "README.md",
              filePath: "lib/DEPLOYMENT GUIDES/VERCEL/3. Environment Variables/SETUP.txt",
              description: "Environment variables setup guide",
              order: 1,
            },
          ],
          steps: [
            "Go to project settings in Vercel",
            "Navigate to Environment Variables",
            "Add each variable (key-value pairs)",
            "Update frontend code to use environment variables",
            "Redeploy if needed",
          ],
          executionSteps: [
            "Open Vercel dashboard",
            "Go to your project",
            "Settings â†’ Environment Variables",
            "Add: `VITE_API_URL=https://your-backend-url.onrender.com` (open [https://your-backend-url.onrender.com](https://your-backend-url.onrender.com) to verify)",
            "Add other required variables",
            "Redeploy or wait for auto-deploy",
          ],
          expectedOutput: "Environment variables configured and app working in production",
          order: 3,
        },
      ],
    },
    {
      id: "render-backend",
      title: "Deploy Backend to Render",
      description: "Complete guide to deploy Express/Node.js backend on Render",
      prerequisites: ["Express backend", "GitHub account"],
      order: 2,
      examples: [
        {
          id: "render-prepare",
          title: "Step 1: Prepare Backend for Render",
          description: "Configure backend for Render deployment",
          learningObjectives: [
            "Set up environment variables",
            "Configure start script",
            "Prepare database connection",
          ],
          prerequisites: ["Express backend"],
          files: [
            {
              name: "package.json",
              filePath: "lib/DEPLOYMENT GUIDES/RENDER/1. Setup/package.json",
              description: "Package.json with start script",
              order: 1,
            },
            {
              name: ".env.example",
              filePath: "lib/DEPLOYMENT GUIDES/RENDER/1. Setup/.env.example",
              description: "Environment variables template",
              order: 2,
            },
          ],
          steps: [
            "Ensure package.json has start script",
            "Set up environment variables",
            "Configure database connection string",
            "Test locally with production-like settings",
          ],
          executionSteps: [
            "Check package.json has: 'start': 'node server.js'",
            "Update MongoDB URI to use environment variable",
            "Test: PORT=5000 node server.js",
            "Verify all environment variables are in .env.example",
          ],
          expectedOutput: "Backend runs successfully with environment variables",
          order: 1,
        },
        {
          id: "render-deploy",
          title: "Step 2: Deploy to Render",
          description: "Deploy your backend API to Render",
          learningObjectives: [
            "Create Render account",
            "Create Web Service",
            "Connect GitHub repository",
            "Configure build and start commands",
          ],
          prerequisites: ["Completed Step 1", "GitHub repository"],
          files: [
            {
              name: "README.md",
              filePath: "lib/DEPLOYMENT GUIDES/RENDER/2. Deploy/DEPLOYMENT_STEPS.txt",
              description: "Detailed Render deployment guide",
              order: 1,
            },
          ],
          steps: [
            "Push code to GitHub",
            "Sign up/login to Render",
            "Create new Web Service",
            "Connect GitHub repository",
            "Configure settings",
            "Add environment variables",
            "Deploy",
          ],
          executionSteps: [
            "Push backend code to GitHub",
            "Go to render.com and sign up",
            "Click 'New +' â†’ 'Web Service'",
            "Connect your GitHub account",
            "Select your repository",
            "Name: your-app-backend",
            "Runtime: Node",
            "Build Command: npm install",
            "Start Command: node server.js",
            "Add environment variables",
            "Click 'Create Web Service'",
          ],
          expectedOutput: "Backend deployed and accessible at render.com URL",
          order: 2,
        },
        {
          id: "render-env-db",
          title: "Step 3: Configure Database and Environment Variables",
          description: "Set up MongoDB Atlas and configure environment variables on Render",
          learningObjectives: [
            "Use MongoDB Atlas for production",
            "Configure environment variables on Render",
            "Connect backend to cloud database",
          ],
          prerequisites: ["Completed Step 2"],
          files: [
            {
              name: "README.md",
              filePath: "lib/DEPLOYMENT GUIDES/RENDER/3. Database and Env/DATABASE_SETUP.txt",
              description: "Database setup guide",
              order: 1,
            },
          ],
          steps: [
            "Set up MongoDB Atlas (if not done)",
            "Get MongoDB connection string",
            "Add environment variables on Render",
            "Update frontend API URL",
            "Test connection",
          ],
          executionSteps: [
            "Go to MongoDB Atlas",
            "Get connection string from Atlas",
            "In Render, go to Environment tab",
            "Add: MONGODB_URI=your_atlas_connection_string",
            "Add: PORT=10000 (Render's default)",
            "Add: NODE_ENV=production",
            "Add frontend URL to CORS whitelist",
            "Save and redeploy",
          ],
          expectedOutput: "Backend connected to MongoDB Atlas and working in production",
          order: 3,
        },
        {
          id: "render-cors",
          title: "Step 4: Configure CORS for Frontend Connection",
          description: "Allow frontend to communicate with backend",
          learningObjectives: [
            "Understand CORS",
            "Configure CORS in Express",
            "Connect frontend to backend",
          ],
          prerequisites: ["Completed Step 3"],
          files: [
            {
              name: "server.js",
              filePath: "lib/DEPLOYMENT GUIDES/RENDER/4. CORS Configuration/server.js",
              description: "Express server with CORS configuration",
              order: 1,
            },
          ],
          steps: [
            "Install cors package",
            "Configure CORS with frontend URL",
            "Test connection between frontend and backend",
          ],
          executionSteps: [
            "Install: npm install cors",
            "In server.js: const cors = require('cors')",
            "Configure: app.use(cors({ origin: process.env.FRONTEND_URL }))",
            "Add FRONTEND_URL to Render environment variables",
            "Redeploy backend",
            "Update frontend API URL to Render URL",
          ],
          expectedOutput: "Frontend successfully communicates with backend",
          order: 4,
        },
      ],
    },
    {
      id: "connecting-frontend-backend",
      title: "Connect Frontend and Backend",
      description: "Connect your deployed frontend (Vercel) to deployed backend (Render)",
      prerequisites: ["Frontend deployed on Vercel", "Backend deployed on Render"],
      order: 3,
      examples: [
        {
          id: "update-api-url",
          title: "Step 1: Update Frontend API URL",
          description: "Configure frontend to use Render backend URL",
          learningObjectives: [
            "Update API endpoint URLs",
            "Use environment variables",
            "Test connection",
          ],
          prerequisites: ["Both deployed"],
          files: [
            {
              name: ".env.production",
              filePath: "lib/DEPLOYMENT GUIDES/CONNECTING/1. Update API URL/.env.production",
              description: "Production environment variables",
              order: 1,
            },
          ],
          steps: [
            "Get Render backend URL",
            "Update frontend API base URL",
            "Add to Vercel environment variables",
            "Redeploy frontend",
          ],
          executionSteps: [
            "Copy your Render backend URL (e.g., [https://your-app.onrender.com](https://your-app.onrender.com))",
            "In Vercel, go to Environment Variables",
            "Add: `VITE_API_URL=https://your-app.onrender.com` (same as [https://your-app.onrender.com](https://your-app.onrender.com))",
            "Redeploy frontend",
            "Test the connection",
          ],
          expectedOutput: "Frontend successfully connects to backend API",
          order: 1,
        },
      ],
    },
  ],
};

